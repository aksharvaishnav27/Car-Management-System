<%@ page language="java" contentType="text/html;charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.sql.*" %>
<%@ page import="java.io.*" %>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="newcar.css">
    <title>CARDX - New Cars</title>
</head>

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}
.buy-button {
    display: inline-block;
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bold;
    text-align: center;
    text-decoration: none;
    background-color: #4CAF50;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.buy-button:hover {
    background-color: #45a049;
}


header {
    background-color: #333;
    color: white;
    text-align: center;
    padding: 10px 0;
}

.logo {
    font-size: 24px;
    font-weight: bold;
}

.search-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}

.search-bar {
    margin-bottom: 20px;
}

.search-bar input[type="text"] {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
}

.search-button {
    background-color: #4caf50;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
}

.filter-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.filter-button {
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
}



.car-cards {
    display: grid;
    grid-template-columns: repeat(2, 1fr); 
    gap: 20px;
    padding: 20px;
    max-width: 1200px; 
    margin: 0 auto; 
}

.card {
    width: 100%; 
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 10px;
    text-align: center;
    background-color: #f9f9f9;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.card img {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
}

.price {
    font-weight: bold;
    font-size: 20px;
    color: #16a219;
}

.card-details h2 {
    margin-top: 10px;
}
</style>

<body>
    <header>
        <div class="logo">CARDX</div>
    </header>
    <form action="newsortform" method="post" class="newcar-form">
        <section class="search-section">
            <div class="search-bar">
                <input type="text" placeholder="Search for cars..." id="search" name="search">
                <button class="search-button">&#128269; Search</button>
            </div>
            <div class="filter-buttons">
                <table>
                    <tr>
                        <td> <label class="filter-button"><input type="checkbox" name ="priceRange"  id="1" value="1" > 1 lakh to 2 lakh</label></td>
                        <td> <label class="filter-button"><input type="checkbox" name ="priceRange"  id="2" value="2" > 2 lakh to 5 lakh</label></td>
                        <td> <label class="filter-button"><input type="checkbox" name ="priceRange"  id="3" value="3" > 5 lakh to 10 lakh</label></td>
                        <td> <label class="filter-button"><input type="checkbox" name ="priceRange"  id="4" value="4"> 10 lakh to 20 lakh</label></td>
                    </tr>
    
                       <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                       </tr>
                       <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                       </tr>
                       <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                       </tr>
                       <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                       </tr>
                       <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                       </tr>
                       <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                       </tr>
                    <tr>
                        <td><label class="filter-button"><input type="checkbox" name ="5"  id="5"> 20 lakh to 30 lakh</label></td>
                        <td><label class="filter-button"><input type="checkbox" name ="6"  id="6"> 30 lakh to 50 lakh</label></td>
                        <td><label class="filter-button"><input type="checkbox" name ="7"  id="7"> 50 lakh to 80 lakh</label></td>
                        <td><label class="filter-button"><input type="checkbox" name ="8"  id="8"> 80 lakh and above</label></td>
                      
                    </tr>
                </table>
                <!-- <label class="filter-button"><input type="checkbox"> 1 lakh to 2 lakh</label>
                <label class="filter-button"><input type="checkbox"> 2 lakh to 5 lakh</label>
                <label class="filter-button"><input type="checkbox"> 5 lakh to 10 lakh</label>
                <label class="filter-button"><input type="checkbox"> 10 lakh to 20 lakh</label>
                <label class="filter-button"><input type="checkbox"> 20 lakh and above</label>
                <label class="filter-button"><input type="checkbox"> Model 2015 - 2020</label>
                <label class="filter-button"><input type="checkbox"> Model 2010 - 2015</label>
                <label class="filter-button"><input type="checkbox"> Model 2020 - 2025</label> -->
            </div>
        </section>
    </form>
    <section class="car-cards">
        <!-- Use a loop to dynamically generate cards -->
        <% try {
            int a=259;
            Class.forName("org.postgresql.Driver");
            Connection connection = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgres", "postgres", "jay");
            PreparedStatement preparedStatement = connection.prepareStatement("SELECT * FROM new_car_model" +
                    " AND NOT EXISTS (SELECT 1 FROM buy_newcar WHERE new_car_model.car_id = buy_newcar.car_id)");
            ResultSet resultSet = preparedStatement.executeQuery();
            ResultSet  name=(ResultSet) session.getAttribute("resultset");
            if(name!=null){
            	resultSet=name;
            	session.removeAttribute("resultset");
            }

            while (resultSet.next()) {
                a++;
        %>
                <div class="card">
                    <img src="<%= "https://source.unsplash.com/random/" +a+ "x150?cars" %>" alt="car_1">
                    <div class="card-details">
                        <span class="price">&#8377;<%= resultSet.getString("price") %></span>
                        <h1> <%= resultSet.getString("company_name") %> </h1>
                        <h2><%= resultSet.getString("model") %></h2>
                        <p><%= resultSet.getString("fuel_type")+" "+resultSet.getString("colour") %></p>
                        <p><%= "stoke is"+ resultSet.getString("model_count")%></p>
                    <form action="buyform" method="post" class="newcar-form">
                   <input type="hidden" name="car_id" id="car_id_input" value="<%= resultSet.getString("car_id") %>">
                  <button type="submit" class="buy-button">Buy Now</button>
                   </form>

                        
                    </div>
                </div>
        <%
            }

            resultSet.close();
            preparedStatement.close();
            connection.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        %>
    </section>

    
</body>

</html>
